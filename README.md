
#  –°–µ—Ä–≤–∏—Å OTP-–∑–∞—â–∏—Ç—ã  
Backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Java –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π (OTP), —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Email, SMS (SMPP-—ç–º—É–ª—è—Ç–æ—Ä), Telegram, –∞ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–¥–æ–≤ –≤ —Ñ–∞–π–ª. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–º–æ—â—å—é –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∫–æ–¥–æ–≤.

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏  
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—è–º–∏ ADMIN –∏ USER  
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ OTP:  
  - Email (—á–µ—Ä–µ–∑ JavaMail)  
  - SMS (–∏—Å–ø–æ–ª—å–∑—É—è SMPP-—ç–º—É–ª—è—Ç–æ—Ä)  
  - Telegram Bot API  
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SLF4J/Logback  
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö OTP –≤ —Ñ–∞–π–ª  
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∫–æ–¥–æ–≤ —Å —É—á–µ—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π: ACTIVE, USED, EXPIRED  
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ OTP, –¥–ª–∏–Ω—ã –∫–æ–¥–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–æ–ª–µ–π  

##  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫  
- Java 17  
- PostgreSQL 17 (JDBC, –±–µ–∑ ORM)  
- Maven  
- JavaMail –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º  
- OpenSMPP-core –¥–ª—è SMPP (—Å —ç–º—É–ª—è—Ç–æ—Ä–æ–º SMPPsim)  
- Telegram Bot API —Å Apache HttpClient  
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä (`com.sun.net.httpserver`)  
- SLF4J + Logback –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è  

##  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫  
### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:  
  - Java 17  
  - PostgreSQL 17  
  - Maven  

- –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞:  
```sql
CREATE DATABASE otp_service;
```

###  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è  

- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `src/main/resources`:  
  - `application.properties` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö  
  - `email.properties` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP —Å–µ—Ä–≤–µ—Ä–∞  
  - `sms.properties` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SMPP —ç–º—É–ª—è—Ç–æ—Ä–∞  
  - `telegram.properties` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ chatId  

- –ü—Ä–∏–º–µ—Ä `application.properties`:  
```
db.url=jdbc:postgresql://localhost:5432/otp_service
db.user=postgres
db.password=your_password
```


## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞  
```
otp-protection-service/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main/
‚îÇ       ‚îú‚îÄ‚îÄ java/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ otp/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ api/         # HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ config/      # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ dao/         # –†–∞–±–æ—Ç–∞ —Å –ë–î (JDBC)
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ model/       # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ DTO
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ service/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ util/        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ resources/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ           ‚îú‚îÄ‚îÄ application.properties
‚îÇ           ‚îú‚îÄ‚îÄ email.properties
‚îÇ           ‚îú‚îÄ‚îÄ logback.xml
‚îÇ           ‚îú‚îÄ‚îÄ sms.properties
‚îÇ           ‚îî‚îÄ‚îÄ telegram.properties
‚îú‚îÄ‚îÄ pom.xml                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Maven
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

##  –†–æ–ª–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å  
- **ADMIN** ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ OTP, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
- **USER** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ OTP  

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ (TTL). –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞:  
```
Authorization: Bearer <token>
```

##  –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ API  

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
```bash
curl -X POST http://localhost:8080/register \
  -H "Content-Type: application/json" \
  -d '{"username":"user1","password":"password123","role":"USER"}'
```

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞)  
```bash
curl -X POST http://localhost:8080/login \
  -H "Content-Type: application/json" \
  -d '{"username":"user1","password":"password123"}'
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OTP  
```bash
curl -X POST http://localhost:8080/otp/generate \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"operationId":"op123","channel":"EMAIL"}'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ OTP  
```bash
curl -X POST http://localhost:8080/otp/validate \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"code":"123456"}'
```

### –ê–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–∏  

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ OTP:  
```bash
curl -X PATCH http://localhost:8080/admin/config \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ADMIN_TOKEN" \
  -d '{"length":6,"ttlSeconds":300}'
```

- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:  
```bash
curl -X GET http://localhost:8080/admin/users \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:  
```bash
curl -X DELETE http://localhost:8080/admin/users/2 \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

##  –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Postman –∏–ª–∏ curl. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:  
  - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
  - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ OTP  
  - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤  
  - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏  

  - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏  
